{"version":3,"sources":["services/persons.js","components/SearchFilter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseURL","axios","get","then","response","data","newObject","post","id","put","delete","SearchFilter","searchFilter","handleFilterChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Person","name","number","handleDelete","onClick","Persons","persons","showAll","setPersons","personsToShow","filter","person","toLowerCase","includes","map","peresonToDelete","find","p","window","confirm","personService","Notification","notification","message","className","notiType","App","useState","setNewName","setNewNumber","setSearchFilter","setShowAll","setNotification","useEffect","initialPersons","event","target","preventDefault","alreadyExist","trim","returnedPerson","newNotification","setTimeout","catch","error","alert","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2fe2d5f6.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseURL = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseURL)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseURL, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseURL}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n  axios.delete(`${baseURL}/${id}`)\n}\n\nexport default { getAll, create, update, deletePerson }","import React from 'react'\n\nconst SearchFilter = ({ searchFilter, handleFilterChange }) => {\n  return (\n    <div>\n      filter shown with <input\n        value={searchFilter}\n        onChange={handleFilterChange} />\n    </div>\n  )\n}\n\nexport default SearchFilter","import React from 'react'\n\nconst PersonForm = ({\n  addPerson,\n  newName,\n  handleNameChange,\n  newNumber, handleNumberChange }) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input\n          value={newName}\n          onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input\n          value={newNumber}\n          onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type='submit'>add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Person = ({name, number, handleDelete, id}) => (\n  <p>{name} {number} <button onClick={handleDelete}>Delete</button></p>\n)\n\nexport default Person","import React from 'react'\nimport personService from '../services/persons'\nimport Person from './Person'\n\nconst Persons = ({ persons, searchFilter, showAll, setPersons }) => {\n  const personsToShow = showAll\n    ? persons\n    : persons.filter(person =>\n      person.name.toLowerCase()\n        .includes(searchFilter.toLowerCase())\n    )\n\n    const handleDelete = id => {\n      const peresonToDelete = persons.find(p => p.id === id)\n      if(window.confirm(`Delete ${peresonToDelete.name}?`)){\n        personService.deletePerson(id)\n        setPersons(persons.filter(p => p.id !== id))\n      }\n    }\n\n  return (\n    <div>\n      {personsToShow\n        .map(person =>\n          <Person\n            key={person.name}\n            name={person.name}\n            number={person.number}\n            handleDelete={() => handleDelete(person.id)}\n          />)\n      }\n    </div>\n  )\n}\n\nexport default Persons","import React from 'react'\n\nconst Notification = ({ notification }) => {\n\n  if (notification.message === null)\n    return null\n  \n  return (\n    <div className={notification.notiType}>\n      {notification.message}\n    </div>\n  )\n}\n\nexport default Notification","import React, { useEffect, useState } from 'react'\nimport personService from './services/persons'\nimport SearchFilter from './components/SearchFilter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchFilter, setSearchFilter] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [notification, setNotification] = useState({ message: null, notiType: 'success' })\n\n  useEffect(() => {\n    personService.getAll()\n      .then(initialPersons =>\n        setPersons(initialPersons)\n      )\n  }, [])\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n\n  const handleFilterChange = (event) => {\n    (event.target.value) ? setShowAll(false) : setShowAll(true) // '' is falsy\n    setSearchFilter(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const alreadyExist = persons.find(p => p.name === newName.trim())\n    //trim() to prevent using whitespaces to add an existing person\n    if (alreadyExist) {\n      if (alreadyExist.number !== newNumber) {\n        const updateNumber = window\n          .confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)\n        if (updateNumber) {\n          personService\n            .update(alreadyExist.id, { ...alreadyExist, number: newNumber })\n            .then(returnedPerson => {\n              setPersons(persons\n                .map(person => person.id !== alreadyExist.id ? person : returnedPerson)\n              )\n              const newNotification = {\n                message: `Updated ${returnedPerson.name}`,\n                notiType: 'success'\n              }\n              setNotification(newNotification)\n              setTimeout(() => setNotification({ ...notification, message: null }), 5000)\n            })\n            .catch(error => {\n              const newNotification = {\n                message: `Information of ${alreadyExist.name} has already been removed from server`,\n                  notiType: 'error'\n              }\n              setNotification(newNotification)\n              setTimeout(() => setNotification({...notification, message: null}), 5000)\n              setPersons(persons.filter(p => p.name !== alreadyExist.name))\n            })\n        }\n      }\n      else alert(`${newName.trim()} is already added to the phonebook`)\n    }\n    else {\n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n\n      personService.create(personObject)\n        .then(returnedPerson => {\n          const newNotification = {\n            message: `Added ${returnedPerson.name}`,\n            notiType: 'success'\n          }\n          setPersons(persons.concat(returnedPerson))\n          setNotification(newNotification)\n          setTimeout(() => setNotification({ ...notification, message: null }), 5000)\n        })\n        .catch(error => {\n          alert(error.response.data.error)\n        })\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n  return (\n    <>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <SearchFilter\n        searchFilter={searchFilter}\n        handleFilterChange={handleFilterChange}\n      />\n      <h3>add a new</h3>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName} handleNameChange={handleNameChange}\n        newNumber={newNumber} handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons}\n        searchFilter={searchFilter}\n        showAll={showAll}\n        setPersons={setPersons}\n      />\n    </>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}